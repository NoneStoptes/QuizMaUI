using Microsoft.Maui.Controls;
using Quiz.Models;

namespace Quiz.Views;

public partial class RegistrationPage : ContentPage
{
    public RegistrationPage()
    {
        InitializeComponent();
    }

    // ?????????? ??? ???????????
    private async void OnRegisterClicked(object sender, EventArgs e)
    {
        // ???????? ?????? ?? ViewModel
        var viewModel = BindingContext as ViewModels.RegistrationPageViewModel;

        if (viewModel != null)
        {
            // ??????? ?????? Person ? ??????? ?? ViewModel
            var person = new Person
            {
                Name = viewModel.Name,
                Nickname = viewModel.Nickname,
                Email = viewModel.Email,
                Password = viewModel.Password,
            };

            // ????????? ????????????
            UserStore.AddUser(person);

            // ???????? ?? ???????? ???????????
            await DisplayAlert("Registration", "You have been successfully registered!", "OK");

            // ????????? ?? ???????? ????? -->
            await Navigation.PushAsync(new LoginPage());
        }
    }

    private async void OnLoginTapped(object sender, EventArgs e)
    {
        await Navigation.PushAsync(new LoginPage());
    }
}